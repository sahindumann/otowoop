/* jspanel.dock.js (c) Stefan Sträßer(Flyer53) <info@jspanel.de> license: MIT */"use strict";import{jsPanel}from"../../jspanel.min.js";function dockPanel(a,b){var c={position:{my:"left-top",at:"right-top"},linkSlaveHeight:!1,linkSlaveWidth:!1,callback:!1},d=Object.assign({},c,a),e=void 0;if(e=d.master&&1===d.master.nodeType?d.master:document.querySelector(d.master),!e){var f=this.id,g=new jsPanelError("Could not dock panel with id <"+f+"> because the panel to dock to does not exist in the document!");try{throw g}catch(a){b&&b.call(a,a)}return console.error(g.name+":",g.message)}var i=document.getElementById(this.id),h=Object.assign({},d.position,{of:e,minLeft:!1,minTop:!1,maxLeft:!1,maxTop:!1,autoposition:!1});if(h.my||(h.my=c.position.my),h.at||(h.at=c.position.at),i.options.position=h,["smallify","smallifyrev","minimize","normalize","maximize"].forEach(function(a){i.setControlStatus(a,"remove")}),d.linkSlaveHeight){var j=window.getComputedStyle(e).height;i.resize({height:j})}if(d.linkSlaveWidth){var k=window.getComputedStyle(e).width;i.resize({width:k})}return i.reposition(h),i.dragit("disable"),i.resizeit("disable"),i.options.minimizeTo=!1,e.reposSlave=function(){document.querySelector("#"+i.id)&&i.reposition()},e.options.dragit.drag.push(e.reposSlave),e.resizeSlave=function(){if(document.querySelector("#"+i.id)){if(i.reposition(),d.linkSlaveHeight){var a=window.getComputedStyle(e).height;i.resize({height:a})}if(d.linkSlaveWidth){var b=window.getComputedStyle(e).width;i.resize({width:b})}}},e.options.resizeit.resize.push(e.resizeSlave),document.addEventListener("jspanelbeforeclose",function(a){if(a.detail===e.id)return e.options.dragit.drag=[],e.options.resizeit.resize=[],!0},!1),document.addEventListener("jspanelclosed",function(a){a.detail===e.id&&document.querySelector("#"+i.id)&&i.close()},!1),document.addEventListener("jspanelmaximized",function(a){if(a.detail===e.id&&document.querySelector("#"+i.id)){if(i.normalize(),d.linkSlaveHeight){var b=window.getComputedStyle(e).height;i.resize({height:b})}if(d.linkSlaveWidth){var c=window.getComputedStyle(e).width;i.resize({width:c})}i.reposition()}},!1),document.addEventListener("jspanelminimized",function(a){a.detail===e.id&&document.querySelector("#"+i.id)&&i.minimize()},!1),document.addEventListener("jspanelnormalized",function(a){if(a.detail===e.id&&document.querySelector("#"+i.id)){if(i.normalize(),d.linkSlaveHeight){var b=window.getComputedStyle(e).height;i.resize({height:b})}if(d.linkSlaveWidth){var c=window.getComputedStyle(e).width;i.resize({width:c})}i.reposition()}},!1),document.addEventListener("jspanelsmallifiedmax",function(a){a.detail===e.id&&document.querySelector("#"+i.id)&&i.smallify().reposition()},!1),document.addEventListener("jspanelsmallified",function(a){a.detail===e.id&&document.querySelector("#"+i.id)&&i.smallify().reposition()},!1),document.addEventListener("jspanelunsmallified",function(a){a.detail===e.id&&document.querySelector("#"+i.id)&&i.unsmallify().reposition()},!1),i.dockedTo=e.id,d.callback&&d.callback.call(i,e,i),i}dockPanel.getVersion=function(){return"1.0.0"},dockPanel.getDate=function(){return"2018-04-13 09:38"},jsPanel.extend({dock:dockPanel});